<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Arbeidskrav 1!</title>
  <link rel="stylesheet" href="game.css" />
</head>
<body>
  <div class="main-container">
    <!-- Healthbars til heroene -->
    <div class="hero-health-containers">
      <div class="healthbar-container">
        <div class="healthbar healer-health"></div>
        <div class="text-container">
          <p id="healer-name-txt">PIPI</p>
          <p id="healer-health-txt">400 / 400 HP</p>
        </div>
      </div>
      <div class="healthbar-container">
        <div class="healthbar archer-health"></div>
        <div class="text-container">
          <p id="archer-name-txt">LALA</p>
          <p id="archer-health-txt">600 / 600 HP</p>
        </div>
      </div>
      <div class="healthbar-container">
        <div class="healthbar warrior-health"></div>
        <div class="text-container">
          <p id="warrior-name-txt">LOLO</p>
          <p id="warrior-health-txt">800 / 800 HP</p>
        </div>
      </div>
    </div>

    <!-- Healthbar til fienden -->
    <div class="dragon-health-container">
      <div class="healthbar-container">
        <div class="healthbar dragon-health"></div>
        <div class="text-container">
          <p id="dragon-name-txt">FOFO</p>
          <div class="text-container dragon-health-txt">2000 / 2000 HP</div>
        </div>
      </div>
    </div>

    <!-- Bildecontainere for heroene -->
    <div class="img-container healer" id="healer-img-container">
      <img class="hero" src="assets/healer.png" />
    </div>
    <div class="img-container archer" id="archer-img-container">
      <img class="hero" src="assets/archer.png" />
    </div>
    <div class="img-container warrior" id="warrior-img-container">
      <img class="hero" src="assets/warrior.png" />
    </div>

    <!-- Bildecontainer for fienden -->
    <div class="enemy-container">
      <div class="img-container dragon-container">
        <img class="dragon" src="assets/dragon.png" />
      </div>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      let heroesArray = [
        {
          id: 0,
          name: "PIPI",
          maxHP: 400,
          currentHP: 400,
          damage: 100,
          alive: true,
        },
        {
          id: 1,
          name: "LALA",
          maxHP: 600,
          currentHP: 600,
          damage: 400,
          alive: true,
        },
        {
          id: 2,
          name: "LOLO",
          maxHP: 800,
          currentHP: 800,
          damage: 400,
          alive: true,
        },
      ];

      let dragonObject = {
        name: "FOFO",
        maxHP: 2000,
        currentHP: 2000,
        damage: 200,
        alive: true,
      };

      function showAlert(attacker, target) {
        alert(
          `${attacker.name} har gjort ${attacker.damage} skade på ${target.name}!\n\n` +
          `${target.name}'s nåværende helse: ${target.currentHP} / ${target.maxHP} HP`
        );
      }

      function attackDragon(hero) {
        if (dragonObject.alive) {
          dragonObject.currentHP -= hero.damage;
          if (dragonObject.currentHP <= 0) {
            dragonObject.currentHP = 0;
            dragonObject.alive = false;
          }
          updateDragonHealthText();
          showAlert(hero, dragonObject);

          // Dragon's counterattack on a random hero
          if (Math.random() < 1 / 3) {
            const randomHeroIndex = Math.floor(Math.random() * heroesArray.length);
            const randomHero = heroesArray[randomHeroIndex];
            if (randomHero.alive) {
              randomHero.currentHP -= dragonObject.damage;
              alert(`${dragonObject.name} har angrepet ${randomHero.name}!\n\n${randomHero.name}'s nåværende helse: ${randomHero.currentHP} / ${randomHero.maxHP} HP`);
            }
          }
        } else {
          alert("Dragen er allerede beseiret!");
        }
      }

      function updateDragonHealthText() {
        const dragonHealthTxt = document.querySelector(".dragon-health-txt");
        dragonHealthTxt.textContent = `${dragonObject.currentHP} / ${dragonObject.maxHP} HP`;
      }

      document.getElementById("healer-img-container").addEventListener("click", function () {
        attackDragon(heroesArray[0]);
      });

      document.getElementById("archer-img-container").addEventListener("click", function () {
        attackDragon(heroesArray[1]);
      });

      document.getElementById("warrior-img-container").addEventListener("click", function () {
        attackDragon(heroesArray[2]);
      });
    });
  </script>
</body>
</html>
